<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Application Automatisme - Évaluation des Compétences</title>

    <!-- 1. Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- 2. Google Material Symbols -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet" />

    <style>
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Animations */
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .slide-in { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { transform: translateX(20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        /* Configuration Material Symbols */
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
            vertical-align: middle;
            line-height: 1;
            user-select: none;
        }
        
        .icon-sm { font-size: 18px !important; }
        .icon-md { font-size: 20px !important; }
        .icon-lg { font-size: 24px !important; }
        .icon-xs { font-size: 16px !important; }
    </style>
</head>
<body class="bg-slate-100 text-slate-900 font-sans min-h-screen pb-20">

    <div id="app">
        <header id="app-header" class="bg-white border-b border-slate-200 sticky top-0 z-30 shadow-sm"></header>
        <main id="app-content" class="max-w-5xl mx-auto px-4 py-8 sm:px-6 lg:px-8"></main>
    </div>

    <script>
        // --- VARIABLE DE CONTROLE D'ANIMATION (CORRECTIF GLITCH) ---
        let shouldAnimate = true; // Actif seulement au chargement ou changement d'onglet

        // --- 1. DONNÉES & CONFIGURATION ---

        const SKILLS_DATA = [
          {
            id: "1",
            title: "1. Spécification des Systèmes",
            description: "Comprendre le besoin, modéliser le procédé et définir les exigences fonctionnelles.",
            icon: "menu_book",
            subSkills: [
              { id: "1.1", title: "Analyse Fonctionnelle et Modélisation", description: "Compréhension du besoin client, GRAFCET, SysML, SADT." },
              { id: "1.2", title: "Sûreté de Fonctionnement", description: "Analyse des risques (APR, HAZOP), SIL/PL." },
              { id: "1.3", title: "Conformité Normative", description: "Normes industrielles (IEC, ISA) et réglementations." }
            ]
          },
          {
            id: "2",
            title: "2. Conception Technique",
            description: "Définir la structure matérielle, logicielle et réseau.",
            icon: "memory",
            subSkills: [
              { id: "2.1", title: "Architecture Système (API/DCS)", description: "Architecture centralisée/distribuée, choix matériel." },
              { id: "2.2", title: "Réseaux Industriels (OT)", description: "Bus de terrain, Ethernet industriel, Protocoles." },
              { id: "2.3", title: "Instrumentation", description: "Capteurs, actionneurs, chaînes de mesure." },
              { id: "2.4", title: "Conception Électrotechnique", description: "Schémas électriques, armoires, CAO." },
              { id: "2.5", title: "Cybersécurité by Design", description: "Segmentation réseau, IEC 62443." }
            ]
          },
          {
            id: "3",
            title: "3. Développement Logiciel",
            description: "Coder et paramétrer les applications de contrôle.",
            icon: "code",
            subSkills: [
              { id: "3.1", title: "Programmation Automates", description: "IEC 61131-3 (Ladder, ST, SFC...)." },
              { id: "3.2", title: "Configuration SNCC/DCS", description: "Systèmes distribués complexes." },
              { id: "3.3", title: "Développement IHM/SCADA", description: "Supervision, ergonomie, gestion d'alarmes." },
              { id: "3.4", title: "Régulation (PID)", description: "Boucles de régulation, réglages." },
              { id: "3.5", title: "Robotique", description: "Intégration robots/cobots, motion control." },
              { id: "3.6", title: "Versioning", description: "Git, SVN, gestion de configuration." }
            ]
          },
          {
            id: "4",
            title: "4. Intégration des Systèmes",
            description: "Assurer l'interopérabilité et la connexion.",
            icon: "hub",
            subSkills: [
              { id: "4.1", title: "Informatique Industrielle", description: "Bases de données (SQL), Scripts, Virtualisation." },
              { id: "4.2", title: "Intégration MES/ERP", description: "Passerelles IT/OT." },
              { id: "4.3", title: "IIoT & Edge", description: "MQTT, Node-RED, passerelles IoT." },
              { id: "4.4", title: "Infrastructure OT", description: "Switches, VLANs, Serveurs." }
            ]
          },
          {
            id: "5",
            title: "5. Validation Technique",
            description: "Vérifier la conformité par tests.",
            icon: "check_circle",
            subSkills: [
              { id: "5.1", title: "Stratégie de Test", description: "Plans de validation." },
              { id: "5.2", title: "Simulation", description: "Jumeaux numériques, Virtual Commissioning." },
              { id: "5.3", title: "Tests FAT", description: "Acceptation en usine." },
              { id: "5.4", title: "Qualification", description: "QI/QO (Pharma/Process)." }
            ]
          },
          {
            id: "6",
            title: "6. Mise en Service",
            description: "Installation et démarrage sur site.",
            icon: "play_circle",
            subSkills: [
              { id: "6.1", title: "Configuration Terrain", description: "Calibration, variateurs." },
              { id: "6.2", title: "I/O Checkout", description: "Tests de boucles, câblage." },
              { id: "6.3", title: "Tests SAT", description: "Acceptation sur site, démarrage." },
              { id: "6.4", title: "Documentation & Formation", description: "DOE, transfert de compétences." }
            ]
          },
          {
            id: "7",
            title: "7. Maintenance",
            description: "MCO et dépannage.",
            icon: "build",
            subSkills: [
              { id: "7.1", title: "Diagnostic", description: "Recherche de pannes." },
              { id: "7.2", title: "Préventif/Correctif", description: "Plans de maintenance." },
              { id: "7.3", title: "Gestion des Modifications", description: "Travaux neufs mineurs." },
              { id: "7.4", title: "Maintenance Sécurité", description: "Patching, sauvegardes." }
            ]
          },
          {
            id: "8",
            title: "8. Optimisation",
            description: "Amélioration continue.",
            icon: "trending_up",
            subSkills: [
              { id: "8.1", title: "Performance (KPI)", description: "TRS, analyse de données." },
              { id: "8.2", title: "Efficacité Énergétique", description: "Optimisation conso." },
              { id: "8.3", title: "Contrôle Avancé", description: "APC, modèles prédictifs." },
              { id: "8.4", title: "Revamping", description: "Gestion de l'obsolescence." }
            ]
          },
          {
            id: "9",
            title: "9. Gestion de Projet",
            description: "Pilotage et organisation.",
            icon: "work",
            subSkills: [
              { id: "9.1", title: "Méthodologie", description: "Cycle V, Agile." },
              { id: "9.2", title: "Planification", description: "Délais, ressources." },
              { id: "9.3", title: "Budget", description: "Chiffrage, suivi financier." },
              { id: "9.4", title: "Coordination", description: "Management transversal." }
            ]
          },
          {
            id: "10",
            title: "10. Soft Skills",
            description: "Humain et relationnel.",
            icon: "group",
            subSkills: [
              { id: "10.1", title: "Relation Client", description: "Posture conseil." },
              { id: "10.2", title: "Communication", description: "Reporting, synthèse." },
              { id: "10.3", title: "Anglais Technique", description: "Oral et écrit." },
              { id: "10.4", title: "Sécurité (HSE)", description: "Culture sécurité chantier." }
            ]
          }
        ];

        const LEVEL_DETAILS = [
          { label: "Pas d'expérience", hours: "0h", desc: "Jamais pratiqué" },
          { label: "Initié", hours: "< 100h", desc: "Premiers acquis" },
          { label: "Intermédiaire", hours: "100-1000h", desc: "Autonome sur tâches simples" },
          { label: "Avancé", hours: "> 1000h", desc: "Maîtrise complète" }
        ];

        const MONTHS = ["Janvier", "Février", "Mars", "Avril", "Mai", "Juin", "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"];

        const PACE_OPTIONS = [
          { label: "Flexible", sub: "3h / sem", value: 3 },
          { label: "Dynamique", sub: "7h / sem", value: 7 },
          { label: "Accéléré", sub: "14h / sem", value: 14 },
          { label: "Intensif", sub: "21h / sem", value: 21 },
          { label: "Immersif", sub: "35h / sem", value: 35 }
        ];

        const FORMAT_OPTIONS = [
          { label: "Express", sub: "< 14h", value: "express" },
          { label: "Court", sub: "14h à 35h", value: "short" },
          { label: "Moyen", sub: "35h à 150h", value: "medium" },
          { label: "Long", sub: "> 150h", value: "long" }
        ];

        const MANUFACTURER_OPTIONS = ["Schneider Electric", "Siemens", "Rockwell Automation", "Omron", "Autre"];
        const SECTOR_OPTIONS = ["Pharmaceutique", "Infrastructure", "Défense", "Agroalimentaire", "Energie", "Autre"];

        const PRESETS = [
          {
            id: 'socle_fondamental',
            label: 'Socle fondamental',
            description: "Idéal pour découvrir le panorama des systèmes, lire un GRAFCET et comprendre les bases du Ladder.",
            skills: ['1.1', '2.1', '3.1']
          },
          {
            id: 'focus_qualif',
            label: 'Qualité',
            description: "Idéal pour valider la conformité des équipements (GAMP5, FAT/SAT) sans toucher au code.",
            skills: ['1.3', '5.1', '5.4']
          },
          {
            id: 'focus_pid',
            label: 'Régulation Process',
            description: "Idéal pour comprendre et régler les boucles de régulation complexes (Température, Pression).",
            skills: ['2.3', '3.4', '8.1']
          },
          {
            id: 'focus_diag',
            label: 'Diagnostic',
            description: "Idéal pour identifier l'origine d'une panne (capteur, câble ou automate) sans modifier le programme.",
            skills: ['2.1', '
